// maybe add promotion frequency later on
// totally didn't forget to add it rn.
allJobs = {

	//Engineers

	"Civil Engineer":{
		minSalary:3500,
		maxSalary:4500,
		minIncrement:200,
		maxIncrement:600,
		successRate:null,
		cgpaNeeded:null,
		requires:['ENG'],
	},

	"Chemical Engineer":{
		minSalary:2500,
		maxSalary:4000,
		minIncrement:200,
		maxIncrement:550,
		successRate:null,
		cgpaNeeded:null,
		requires:['ENG'],
	},


	"Mechanical Engineer":{
		minSalary:3200,
		maxSalary:4000,
		minIncrement:250,
		maxIncrement:575,
		successRate:null,
		cgpaNeeded:null,
		requires:['ENG'],
	},


	"Chemical Engineer":{
		minSalary:2500,
		maxSalary:4000,
		minIncrement:200,
		maxIncrement:550,
		successRate:null,
		cgpaNeeded:null,
		requires:['ENG'],
	},


	"Aerospace Engineer":{
		minSalary:4500,
		maxSalary:5500,
		minIncrement:400,
		maxIncrement:750,
		successRate:null,
		cgpaNeeded:null,
		requires:['ENG'],
	},


	"Environmental Engineer":{
		minSalary:2000,
		maxSalary:3500,
		minIncrement:150,
		maxIncrement:400,
		successRate:null,
		cgpaNeeded:null,
		requires:['ENG'],
	},


	"Electrical Engineer":{
		minSalary:4000,
		maxSalary:5200,
		minIncrement:400,
		maxIncrement:750,
		successRate:null,
		cgpaNeeded:null,
		requires:['ENG'],
	},


	"Computer Engineer":{
		minSalary:6000,
		maxSalary:8000,
		minIncrement:450,
		maxIncrement:800,
		successRate:null,
		cgpaNeeded:null,
		requires:['ENG'],
	},


	"Nuclear Engineer":{
		minSalary:5500,
		maxSalary:8000,
		minIncrement:400,
		maxIncrement:80,
		successRate:null,
		cgpaNeeded:null,
		requires:['ENG'],
	},

	"Aerospace Engineer":{
		minSalary:4500,
		maxSalary:5500,
		minIncrement:400,
		maxIncrement:750,
		successRate:null,
		cgpaNeeded:null,
		requires:['ENG'],
	},

	//Management or Finance

	"Public Banker":{
		minSalary:4500,
		maxSalary:5500,
		minIncrement:450,
		maxIncrement:800,
		successRate:null,
		cgpaNeeded:null,
		requires:['COM'],
	},

	"Private Banker":{
		minSalary:5000,
		maxSalary:7500,
		minIncrement:500,
		maxIncrement:900,
		successRate:null,
		cgpaNeeded:null,
		requires:['COM'],
	},


	"Finance Consultant":{
		minSalary:4000,
		maxSalary:5500,
		minIncrement:200,
		maxIncrement:700,
		successRate:null,
		cgpaNeeded:null,
		requires:['COM'],
	},



	"MNC Manager":{
		minSalary:4500,
		maxSalary:7000,
		minIncrement:300,
		maxIncrement:600,
		successRate:null,
		cgpaNeeded:null,
		requires:['COM'],
	},


	"Supermarket Manager":{
		minSalary:3500,
		maxSalary:6000,
		minIncrement:200,
		maxIncrement:400,
		successRate:null,
		cgpaNeeded:null,
		requires:['COM'],
	},



	"Commercial Broker":{
		minSalary:4000,
		maxSalary:6500,
		minIncrement:100,
		maxIncrement:1200,
		successRate:null,
		cgpaNeeded:null,
		requires:['COM'],
	},


	"Hedge Fund Manager":{
		minSalary:5000,
		maxSalary:7500,
		minIncrement:200,
		maxIncrement:1200,
		successRate:null,
		cgpaNeeded:null,
		requires:['COM'],
	},




	"Insurance Salesman":{
		minSalary:2000,
		maxSalary:4000,
		minIncrement:100,
		maxIncrement:800,
		successRate:null,
		cgpaNeeded:null,
		requires:['COM'],
	},




	"Stock Broker":{
		minSalary:3250,
		maxSalary:6500,
		minIncrement:200,
		maxIncrement:750,
		successRate:null,
		cgpaNeeded:null,
		requires:['COM'],
	},




	"Product Salesman":{
		minSalary:1500,
		maxSalary:3500,
		minIncrement:100,
		maxIncrement:500,
		successRate:null,
		cgpaNeeded:null,
		requires:['COM'],
	},


	"Accountant":{
		minSalary:2000,
		maxSalary:4000,
		minIncrement:200,
		maxIncrement:600,
		successRate:null,
		cgpaNeeded:null,
		requires:['COMMUNITY'],
	},


	"ChLIBered Accountant":{
		minSalary:5000,
		maxSalary:9000,
		minIncrement:250,
		maxIncrement:900,
		successRate:null,
		cgpaNeeded:null,
		requires:['COMMUNITY'],
	},

	// Science maybe?




	"Biomedical Scientist":{
		minSalary:4500,
		maxSalary:7000,
		minIncrement:250,
		maxIncrement:600,
		successRate:null,
		cgpaNeeded:null,
		requires:['MED'],
	},


	"Biochemical Scientist":{
		minSalary:4000,
		maxSalary:6000,
		minIncrement:200,
		maxIncrement:500,
		successRate:null,
		cgpaNeeded:null,
		requires:['MED'],
	},



	"Nuclear Scientist":{
		minSalary:6000,
		maxSalary:8500,
		minIncrement:400,
		maxIncrement:850,
		successRate:null,
		cgpaNeeded:null,
		requires:['ENG'],
	},




	"Petrochemical Scientist":{
		minSalary:3000,
		maxSalary:5500,
		minIncrement:300,
		maxIncrement:700,
		successRate:null,
		cgpaNeeded:null,
		requires:['ENG'],
	},



	"Computer Scientist":{
		minSalary:6000,
		maxSalary:10000,
		minIncrement:400,
		maxIncrement:950,
		successRate:null,
		cgpaNeeded:null,
		requires:['ENG'],
	},




	"Medical Scientist":{
		minSalary:4500,
		maxSalary:7250,
		minIncrement:350,
		maxIncrement:575,
		successRate:null,
		cgpaNeeded:null,
		requires:['MED'],
	},




	"Cardiologist":{
		minSalary:6000,
		maxSalary:9000,
		minIncrement:400,
		maxIncrement:750,
		successRate:null,
		cgpaNeeded:null,
		requires:['MED'],
	},



	"Dentist":{
		minSalary:6500,
		maxSalary:9500,
		minIncrement:400,
		maxIncrement:750,
		successRate:null,
		cgpaNeeded:null,
		requires:['MED'],
	},


	"Paediatrician":{
		minSalary:5500,
		maxSalary:9000,
		minIncrement:300,
		maxIncrement:700,
		successRate:null,
		cgpaNeeded:null,
		requires:['MED'],
	},


	"Radiologist":{
		minSalary:7000,
		maxSalary:10000,
		minIncrement:500,
		maxIncrement:850,
		successRate:null,
		cgpaNeeded:null,
		requires:['MED'],
	},


	"Neurologist":{
		minSalary:7500,
		maxSalary:11000,
		minIncrement:500,
		maxIncrement:900,
		successRate:null,
		cgpaNeeded:null,
		requires:['MED'],
	},



	"Veterenarian":{
		minSalary:5000,
		maxSalary:7000,
		minIncrement:300,
		maxIncrement:550,
		successRate:null,
		cgpaNeeded:null,
		requires:['MED'],
	},


	"Nurse":{
		minSalary:3000,
		maxSalary:5000,
		minIncrement:250,
		maxIncrement:450,
		successRate:null,
		cgpaNeeded:null,
		requires:['MED'],
	},



	"Biologist":{
		minSalary:4000,
		maxSalary:6000,
		minIncrement:300,
		maxIncrement:575,
		successRate:null,
		cgpaNeeded:null,
		requires:['MED'],
	},


	"Psychiatrist":{
		minSalary:5000,
		maxSalary:9500,
		minIncrement:350,
		maxIncrement:850,
		successRate:null,
		cgpaNeeded:null,
		requires:['სამედიცინო'],
	},



	"Surgeon":{
		minSalary:8000,
		maxSalary:12000,
		minIncrement:500,
		maxIncrement:1000,
		successRate:null,
		cgpaNeeded:null,
		requires:['MED'],
	},


	// Lesser jobs or LIBs related



	"Teacher":{
		minSalary:3000,
		maxSalary:4000,
		minIncrement:200,
		maxIncrement:375,
		successRate:null,
		cgpaNeeded:null,
		requires:['LIB','LIB'],
	},


	"Chef":{
		minSalary:2500,
		maxSalary:5000,
		minIncrement:150,
		maxIncrement:425,
		successRate:null,
		cgpaNeeded:null,
		requires:['LIB'],
	},


	"Firefighter":{
		minSalary:3000,
		maxSalary:4250,
		minIncrement:200,
		maxIncrement:400,
		successRate:null,
		cgpaNeeded:null,
		requires:['საჯარო','LIB'],
	},



	"Security Guard":{
		minSalary:1500,
		maxSalary:2500,
		minIncrement:100,
		maxIncrement:200,
		successRate:null,
		cgpaNeeded:null,
		requires:['საჯარო'],
	
	},



	"Army Personnel":{
		minSalary:2500,
		maxSalary:2750,
		minIncrement:150,
		maxIncrement:425,
		successRate:null,
		cgpaNeeded:null,
		requires:['LIB','საჯარო'],
	},



	"Graphic Designer":{
		minSalary:2500,
		maxSalary:3500,
		minIncrement:150,
		maxIncrement:325,
		successRate:null,
		cgpaNeeded:null,
		requires:['LIB'],
	},



	"Mall Cop":{
		minSalary:1500,
		maxSalary:2500,
		minIncrement:100,
		maxIncrement:250,
		successRate:null,
		cgpaNeeded:null,
		requires:['საჯარო'],
	},



	"Political Analyst":{
		minSalary:2500,
		maxSalary:4000,
		minIncrement:100,
		maxIncrement:250,
		successRate:null,
		cgpaNeeded:null,
		requires:['საჯარო','LIB'],
	},
	

	"Office Secretary":{
		minSalary:2500,
		maxSalary:3500,
		minIncrement:150,
		maxIncrement:300,
		successRate:null,
		cgpaNeeded:null,
		requires:['საჯარო','LIB','COM'],
	},


	"Govt Clerk":{
		minSalary:1500,
		maxSalary:3500,
		minIncrement:100,
		maxIncrement:300,
		successRate:null,
		cgpaNeeded:null,
		requires:['საჯარო','COM','LIB','ENG'],
	},


	"Botanist":{
		minSalary:1000,
		maxSalary:2500,
		minIncrement:100,
		maxIncrement:200,
		successRate:null,
		cgpaNeeded:null,
		requires:['საჯარო','LIB','LIB'],
	},



	// Law related


	"Legal Assistant":{
		minSalary:2000,
		maxSalary:2750,
		minIncrement:125,
		maxIncrement:250,
		successRate:null,
		cgpaNeeded:null,
		requires:['სამართალი'],
	},


	"Law Attorney":{
		minSalary:4000,
		maxSalary:6000,
		minIncrement:125,
		maxIncrement:400,
		successRate:null,
		cgpaNeeded:null,
		requires:['სამართალი'],
	},


	"Criminal Lawyer":{
		minSalary:3500,
		maxSalary:5500,
		minIncrement:125,
		maxIncrement:400,
		successRate:null,
		cgpaNeeded:null,
		requires:['სამართალი'],
	},



	"Tax Lawyer":{
		minSalary:7000,
		maxSalary:10000,
		minIncrement:250,
		maxIncrement:800,
		successRate:null,
		cgpaNeeded:null,
		requires:['სამართალი'],
	},



	"Public Lawyer":{
		minSalary:2750,
		maxSalary:4500,
		minIncrement:150,
		maxIncrement:450,
		successRate:null,
		cgpaNeeded:null,
		requires:['სამართალი'],
	},




	"Corporate Lawyer":{
		minSalary:7000,
		maxSalary:12000,
		minIncrement:150,
		maxIncrement:1000,
		successRate:null,
		cgpaNeeded:null,
		requires:['Lსამართალი'],
	},




	"Law Mediator":{
		minSalary:4000,
		maxSalary:6000,
		minIncrement:200,
		maxIncrement:600,
		successRate:null,
		cgpaNeeded:null,
		requires:['სამართალი'],
	},




	// No degree required



	"Fast Food Worker":{
		minSalary:1250,
		maxSalary:2000,
		minIncrement:50,
		maxIncrement:75,
		successRate:null,
		cgpaNeeded:null,
		requires:[],
	},


	"Sweeper":{
		minSalary:1000,
		maxSalary:2000,
		minIncrement:50,
		maxIncrement:75,
		successRate:null,
		cgpaNeeded:null,
		requires:[],
	},


	"Laborer":{
		minSalary:1000,
		maxSalary:1500,
		minIncrement:50,
		maxIncrement:75,
		successRate:null,
		cgpaNeeded:null,
		requires:[],
	},



	"Delivery Driver":{
		minSalary:1500,
		maxSalary:2500,
		minIncrement:50,
		maxIncrement:100,
		successRate:null,
		cgpaNeeded:null,
		requires:[],
	},


	"Restaurant Waiter":{
		minSalary:1250,
		maxSalary:2250,
		minIncrement:60,
		maxIncrement:100,
		successRate:null,
		cgpaNeeded:null,
		requires:[],
	},


	"Garbage Collector":{
		minSalary:900,
		maxSalary:1750,
		minIncrement:25,
		maxIncrement:75,
		successRate:null,
		cgpaNeeded:null,
		requires:[],
	},


	"Plumber":{
		minSalary:1250,
		maxSalary:2250,
		minIncrement:50,
		maxIncrement:100,
		successRate:null,
		cgpaNeeded:null,
		requires:[],
	},


	"Clown":{
		minSalary:900,
		maxSalary:1750,
		minIncrement:25,
		maxIncrement:75,
		successRate:null,
		cgpaNeeded:null,
		requires:[],
	},


	"Technician":{
		minSalary:1250,
		maxSalary:2100,
		minIncrement:50,
		maxIncrement:100,
		successRate:null,
		cgpaNeeded:null,
		requires:['საჯარო'],
	},

	"Call Center Employee":{
		minSalary:1250,
		maxSalary:2250,
		minIncrement:50,
		maxIncrement:100,
		successRate:null,
		cgpaNeeded:null,
		requires:['საჯარო','ENG','COM','LIB'],
	}

}









function jobs(){
	
	var html = "<br>";
	let amountOfJobs = 6;
	let listedJobs = [];
	let jobsList = Object.keys(allJobs)
	for (x=0;x<amountOfJobs;x++){
		let randJobName = jobsList[randint(0,jobsList.length-1)];

		// to show only DISTINCT jobs
		if (!listedJobs.includes(randJobName)){
			listedJobs.push(randJobName);
			randJob = allJobs[randJobName]
 			let btnClasses = `w3-round w3-ripple w3-btn w3-indigo w3-hover-red`;	
			let elem = `<button class="${btnClasses}" onclick="findJob('${randJobName}')">${randJobName}</button><br><br>`;
			html += elem;
		}
		else {
			x--;
		}

	}

	let btnClasses = 'btn-lg btn-secondary'
	let moreJobsElem = `<br><button onclick=jobs() class="${btnClasses}">ნახე მეტი</button><br>`
	html += moreJobsElem;
	


	Swal.fire({
		heightAuto:false,
		title:'სამსახურები',
		background:swalBackground,
		showConfirmButton:false,
		showCancelButton:false,
		position:'top',
		showCloseButton:true,
		html:html
	});



};







function findJob(jobName){
	let jobDetails = allJobs[jobName];
	// round off salary to last digit 0
	let randSalary = approx(randint(jobDetails.minSalary,jobDetails.maxSalary));
	let jobRequirements = jobDetails.requires;
	if (jobRequirements.length != 0){
		var jobRequiresDegree = true;
		var jobReq = `
		თქვენ შეგიძლიათ ჩვენთან მუშაობის დაწყება თუ გაქვთ შემდეგი დიპლომი: -<br>
		<br>
		`;
		for (x=0;x<jobRequirements.length;x++){
			let degreeName = degreeNames(`${jobRequirements[x]}<br>`);
			jobReq += degreeName;
 		}
		



	}
	else if (jobRequirements.length == 0){
		var jobRequiresDegree = false;
		var jobReq = `
		ამ სამსახურს არ ჭირდება დიპლომი.
		`;
	};


	var html = `
	<br><div id='findJob'>
	<span id="jobTitle">სამსახურის სახელი : ${jobName}</span><br><br>
	<p id="jobDetails">
	ხელფასი თვეში: $${randSalary}<br>
	წლიური ხელფასი : $${randSalary*12}<br><br>
	${jobReq}
	</p>
	</div><br>
	
	`;



	Swal.fire({
		heightAuto:false,
		title:'ვაკანსიების სია',
		background:swalBackground,
		showConfirmButton:true,
		showCancelButton:true,
		cancelButtonText:'ჩემთვის არ არის!',
		confirmButtonText:'ცადე ბედი',
		position:'top',
		showCloseButton:true,
		html:html
	}).then((result) => {
		if (result.value){
			checkJob(jobName,randSalary);
		}
		else if (result.dismiss == Swal.DismissReason.cancel){
			jobs();
		}
	});

}





function checkJob(jobName,jobSalary){

	let jobDetails = allJobs[jobName];
	let jobRequirements = jobDetails.requires;
	let hasRequiredDegree = false;
	let userDegreeList = Object.keys(USER.education.degrees);

	for (degree in userDegreeList){

		if (jobRequirements.includes(userDegreeList[degree])){
			hasRequiredDegree = true;
			USER.job.name = jobName;
			USER.job.salary = jobSalary;
			USER.job.promotions = 0;
			jobSuccess();
		}
	};
	if (jobRequirements.length == 0){
		hasRequiredDegree = true;
		USER.job.name = jobName;
		USER.job.salary = jobSalary;
		USER.job.promotions = 0;
		jobSuccess();
	}
	if (!hasRequiredDegree){
		jobReject();
	}



}


function jobSuccess(){

	let html = `<br>
	<p>
	თქვენი სივის განხილვის შემდეგ თქვენ მიღებული ხართ სამსახურში!<br>
	თქვენი ხელფასი $${USER.job.salary} თვეში.<br>
	</p><br>
	`
	message(`თქვენ ახლა მუშაობთ, როგორც ${USER.job.name}`);
	Swal.fire({
		heightAuto:false,
		title:'თქვენ მიღებული ხართ სამსახურში!',
		icon:'success',
		html:html,
		background:swalBackground,
		showCancelButton:false,
		showConfirmButton:true,
		confirmButtonText:'ოკუურ!'
	});

	jobAllow = false;
	hasJob = true;
	
	HTML.actions.setAttribute('onclick','jobMenu()');
	HTML.actions.classList = [];
	HTML.actions.classList.add('btn-main','btn-purple');

}


function jobReject(){

	let html = `<br>
	თქვენ არ აკმაყოფილებთ ჩვენს მოთხოვნებს. არ გაქვთ შესაბამისი თვისებები.
	<br>`

	Swal.fire({
		heightAuto:false,
		title:'თქვენი არ აგიყვანეს სამსახურში',
		icon:'error',
		html:html,
		background:swalBackground,
		showConfirmButton:true,
		showCancelButton:false,
		confirmButtonText:'გასაგებია'
	})
}




function jobMenu(){

	let html = `
		<br>${buttons.bank}<br><br>
		${buttons.budget}<br><br>
		${buttons.myJob}	
		<br><br><br><br>
		${buttons.profile}
		${buttons.assets}
		<br><br>`;

	Swal.fire({
		heightAuto:false,
		title:'Actions',
		html:html,
		showCloseButton:true,
		showConfirmButton:false
	})


}






function myJob(){

	let html = `<br>
	სამსახურის სახელი : ${USER.job.name}<br>
	ხელფასი თვეში : $${USER.job.salary}<br>
	წლიური ხელფასი : $${USER.job.salary*12}<br><br>
	დაწინაურება: ${USER.job.promotions}<br>
	მუშაობ: ${USER.job.duration} თვე<br><br><br>
	${buttons.leaveJob}

	<br><br>`;



	Swal.fire({
		heightAuto:false,
		title:'ჩემი სამსახური',
		html:html,
		showCloseButton:false,
		showConfirmButton:false,
		showCloseButton:true
	})


}







function monthlyJobEvent(){
	USER.job.duration += 1;
	money += USER.job.salary;

	message(`უკვე თვის ბოლოა შენ ჩაგერიცხა ხელფასი $${USER.job.salary}`);


	randPromotionEvent();
	display();

}


function randPromotionEvent(){
	let randNum = randint(0,22);
	if (randNum == 22){

		let minIncrement = allJobs[USER.job.name]['minIncrement'];
		let maxIncrement = allJobs[USER.job.name]['maxIncrement'];
		let randInc1 = approx(randint(minIncrement,maxIncrement));
		let randInc2 = approx(randint(minIncrement,maxIncrement));
		let inc;
		if (randInc1 <= randInc2){
			inc = randInc1;
		}
		else {
			inc = randInc2
		}

		USER.job.promotions += 1;
		USER.job.salary += inc;	
		message(`შემ მოგემატა ხელფასი $${inc}`);

		let html = `<br>
		დანამატი : $${inc}<br>
		ახალი ხელფასი : $${USER.job.salary}<br><br>

		`;

		Swal.fire({
			heightAuto:false,
			title:'Job Promotion',
			html:html,
			icon:'success',
			confirmButtonText:'დავიმსახურე'
		});


	}
}





function leaveJob(){

	Swal.fire({
		heightAuto:false,
		icon:'warning',
		title:'დარწმუნებული ხარ?',
		text:`შენ აპირებ სამსახურიდან წამოსვლას ${USER.job.name}`,
		confirmButtonText:`დარწმუნებული ვარ`,
		showCancelButton:true,
		cancelButtonText:'არა'
	
	}).then((result) => {

		if (result.value){
			let oldJob = {
				name:USER.job.name,
				salary:USER.job.salary,
				promotions:USER.job.promotions,
				duration:USER.job.duration
			}



			hasJob = false;
			USER.job.name = "უმუშევარი";
			USER.job.salary = 0;
			USER.job.promotions = 0;
			USER.job.duration = 0;
			USER.job.previousJobs.push(oldJob);
	
			message(`შენ დატოვე სამსახური`);

			HTML.actions.setAttribute('onclick','actions()');
			HTML.actions.classList = [];
			HTML.actions.classList.add('btn-main','btn-dark');

			Swal.fire({
				heightAuto:false,
				icon:'success',
				title:'შენ ახლა უმუშევარი ხარ!',
				confirmButtonText:'გავიგეეე'
			})

		}

	});


}




